<!-- source-hash: 4e67b7b220704f783d179d15eb229b6f -->
A specialized message publisher for broadcasting agent installation events via NATS, using machine-specific topics to notify the system when software agents are deployed.

## Key Components

- **InstalledAgentMessagePublisher** - Main publisher struct that wraps NATS messaging functionality
- **publish()** - Async method that sends agent installation notifications with machine ID, agent type, and version
- **build_topic_name()** - Creates machine-specific topic names following the pattern `machine.{machine_id}.installed-agent`
- **build_message()** - Constructs `InstalledAgentMessage` payloads with agent metadata

## Usage Example

```rust
use crate::services::installed_agent_message_publisher::InstalledAgentMessagePublisher;
use crate::services::nats_message_publisher::NatsMessagePublisher;

// Initialize the publisher
let nats_publisher = NatsMessagePublisher::new(nats_connection);
let agent_publisher = InstalledAgentMessagePublisher::new(nats_publisher);

// Publish agent installation event
agent_publisher.publish(
    "server-001".to_string(),
    "monitoring-agent".to_string(), 
    "1.2.3".to_string()
).await?;

// This publishes to topic: "machine.server-001.installed-agent"
// With payload: { "agent_type": "monitoring-agent", "version": "1.2.3" }
```

The publisher follows Flamingo's event-driven architecture pattern, enabling real-time tracking of agent deployments across managed infrastructure. Error handling provides context about which topic failed to publish, facilitating debugging in distributed MSP environments.