<!-- source-hash: 906186c17acab09973f2cba4409e0a46 -->
A React hook that processes real-time NATS message chunks and converts them into structured dialog messages for chat interfaces.

## Key Components

- **useDialogRealtimeProcessor**: Main hook that processes streaming chunks from NATS messages
- **processChunk**: Core function that parses different chunk types (text, tool execution, approvals) into Message objects
- **createBaseMessage**: Helper that creates standardized message structures with proper owner and metadata
- **Action parsing**: Handles various action types including message_start/end, errors, text, and tool executions

## Usage Example

```typescript
import { useDialogRealtimeProcessor } from './use-dialog-realtime-processor'

function ChatComponent({ dialogId }: { dialogId: string }) {
  const [messages, setMessages] = useState<Message[]>([])
  const [isStreaming, setIsStreaming] = useState(false)

  const { processChunk } = useDialogRealtimeProcessor({
    dialogId,
    onStreamStart: (isAdmin) => {
      console.log(`Stream started for ${isAdmin ? 'admin' : 'client'}`)
      setIsStreaming(true)
    },
    onStreamEnd: (isAdmin) => {
      setIsStreaming(false)
    },
    onMessageAdd: (message, isAdmin) => {
      setMessages(prev => [...prev, message])
    },
    onError: (error, isAdmin) => {
      console.error(`Chat error: ${error}`)
    }
  })

  // Process incoming NATS chunks
  useEffect(() => {
    natsClient.subscribe(`dialog.${dialogId}`, processChunk)
  }, [dialogId, processChunk])

  return (
    <div>
      {messages.map(msg => <MessageComponent key={msg.id} message={msg} />)}
      {isStreaming && <TypingIndicator />}
    </div>
  )
}
```

The hook handles complex message transformation, including tool executions, approval requests/results, and different owner types (admin, client, assistant) while maintaining proper typing and error handling.