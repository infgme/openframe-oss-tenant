<!-- source-hash: 9913aeefefb50cf6bd87ebe3d97c4ed2 -->
This service manages the complete lifecycle of tool agent updates in the Flamingo platform, including download, installation, backup management, and process coordination.

## Key Components

- **ToolAgentUpdateService**: Main orchestrator for tool updates with dependency injection for all required services
- **process_update()**: Public entry point that validates update requirements and coordinates the update process
- **do_update()**: Internal implementation handling the actual update workflow including backup, download, and installation
- **Cross-platform support**: Unix-specific executable permissions and fallback download mechanisms

## Usage Example

```rust
use crate::services::tool_agent_update_service::ToolAgentUpdateService;
use crate::models::tool_agent_update_message::ToolAgentUpdateMessage;

// Initialize the service with all dependencies
let update_service = ToolAgentUpdateService::new(
    github_download_service,
    tool_agent_file_client,
    installed_tools_service,
    tool_kill_service,
    tool_run_manager,
    directory_manager,
    config_service,
    installed_agent_publisher,
);

// Process an update message
let update_message = ToolAgentUpdateMessage {
    tool_agent_id: "my-tool".to_string(),
    version: "1.2.0".to_string(),
    download_configurations: vec![],
};

match update_service.process_update(update_message).await {
    Ok(_) => println!("Tool updated successfully"),
    Err(e) => eprintln!("Update failed: {:#}", e),
}
```

The service implements a robust update process with proper error handling, backup mechanisms, and supports both modern GitHub-based downloads and legacy Artifactory fallbacks. It ensures process safety by coordinating with the tool run manager to prevent conflicts during updates.