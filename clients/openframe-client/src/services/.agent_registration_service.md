<!-- source-hash: 4794fa7f03b0f055d87a05a705ae0829 -->
Manages the agent registration process for Flamingo's MSP platform, handling device enrollment and authentication setup.

## Key Components

- **`AgentRegistrationService`** - Core service orchestrating the agent registration workflow
- **`register_agent()`** - Main registration method that enrolls the device with the platform
- **`build_registration_request()`** - Constructs registration payload with device metadata
- Dependencies on `RegistrationClient`, `DeviceDataFetcher`, `AgentConfigurationService`, and `InitialConfigurationService`

## Usage Example

```rust
use agent_registration_service::AgentRegistrationService;

// Initialize service with dependencies
let registration_service = AgentRegistrationService::new(
    registration_client,
    device_data_fetcher,
    config_service,
    initial_config_service,
);

// Register the agent with the platform
match registration_service.register_agent().await {
    Ok(response) => {
        println!("Agent registered with ID: {}", response.machine_id);
        println!("Client ID: {}", response.client_id);
    },
    Err(e) => eprintln!("Registration failed: {}", e),
}
```

The service collects device information (hostname, OS type, agent version), sends a registration request using an initial key, and saves the returned credentials. In production mode, it cleans up the initial key after successful registration to prevent reuse.