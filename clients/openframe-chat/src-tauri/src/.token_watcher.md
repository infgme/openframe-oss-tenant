<!-- source-hash: e58cd559769085d3b7ff9fcb8181f0d8 -->
A background service that monitors an encrypted token file for changes and automatically notifies the frontend when tokens are updated or received. It uses a polling mechanism to detect file changes and emits Tauri events to keep the UI synchronized.

## Key Components

- **TokenWatcher** - Main service that polls for token file changes and manages decryption
- **TokenState** - Tauri state wrapper for sharing current token across commands
- **TokenUpdateEvent** - Serializable event structure for frontend communication
- **start()** - Static factory method that initializes the watcher and returns shared state
- **check_and_update_token()** - Core polling logic that detects changes and emits updates

## Usage Example

```rust
use tauri::{Builder, generate_handler};

#[tauri::command]
fn get_current_token(state: tauri::State<TokenState>) -> Option<String> {
    state.current_token.lock().unwrap().clone()
}

fn main() {
    tauri::Builder::default()
        .setup(|app| {
            let token_state = TokenWatcher::start(
                "/path/to/token.enc".to_string(),
                "encryption_secret".to_string(),
                app.handle().clone(),
            );
            app.manage(token_state);
            Ok(())
        })
        .invoke_handler(generate_handler![get_current_token])
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

The service runs continuously in a background thread, checking for token changes every 5 seconds and automatically emitting "token-update" events to the frontend when changes are detected.