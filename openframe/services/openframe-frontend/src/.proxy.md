<!-- source-hash: e5a95f0a1deff7f080e34af81d9b197d -->
A Next.js middleware proxy that controls route access based on application deployment modes, handling multi-tenant SaaS and OSS configurations.

## Key Components

- **`getMode()`** - Determines the current app mode from environment variables (`oss-tenant`, `saas-tenant`, or `saas-shared`)
- **`isAllowed()`** - Validates if a pathname is accessible based on the current app mode
- **`defaultRedirect()`** - Returns the default redirect path for each app mode
- **`proxy()`** - Main middleware function that handles request routing and redirects
- **`config`** - Middleware matcher configuration excluding static assets

## Usage Example

```typescript
// Environment variable configuration
// NEXT_PUBLIC_APP_MODE=saas-shared

// In next.config.js or middleware setup
import { proxy } from './proxy'

export default proxy

// Route behavior by mode:
// saas-shared: Only allows /auth and / routes
// saas-tenant: Blocks /auth routes, allows all others  
// oss-tenant: Allows all routes

// Automatic redirects:
// saas-shared: Redirects to /auth
// saas-tenant: Redirects to /dashboard
// oss-tenant: Redirects to /auth
```

The middleware automatically redirects unauthorized requests to appropriate landing pages while preserving access to static assets and API routes. Static files like CSS, images, and Next.js internals are always allowed regardless of mode.