<!-- source-hash: f7b21e75e355aa20a08e890a01e17c31 -->
A service for managing persistent storage of tool connections in JSON format, handling CRUD operations for agent tool configurations.

## Key Components

- **`ToolConnectionService`** - Main service struct that manages tool connection persistence
- **`new()`** - Creates service instance with secured directory storage path
- **`save()`** - Upserts tool connections (updates existing or creates new)
- **`exists_by_tool_agent_id()`** - Checks if connection exists for given agent ID
- **`get_all()`** - Retrieves all stored tool connections
- **`delete_by_tool_agent_id()`** - Removes connection by agent ID
- **`persist()`** - Internal method for writing connections to JSON file

## Usage Example

```rust
use anyhow::Result;
use crate::platform::directories::DirectoryManager;
use crate::models::tool_connection::ToolConnection;

async fn manage_tool_connections() -> Result<()> {
    let dir_manager = DirectoryManager::new()?;
    let service = ToolConnectionService::new(dir_manager)?;
    
    // Create a new tool connection
    let connection = ToolConnection {
        tool_agent_id: "agent_123".to_string(),
        // ... other fields
    };
    
    // Save the connection
    service.save(connection).await?;
    
    // Check if connection exists
    let exists = service.exists_by_tool_agent_id("agent_123").await?;
    
    // Get all connections
    let connections = service.get_all().await?;
    
    // Delete connection
    let deleted = service.delete_by_tool_agent_id("agent_123").await?;
    
    Ok(())
}
```

The service uses file-based JSON storage in a secured directory, automatically handling serialization/deserialization and directory creation. All operations are async and return `Result<T>` for proper error handling.