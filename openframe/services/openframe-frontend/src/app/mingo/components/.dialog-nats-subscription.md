<!-- source-hash: f7abf10709f3e1be4bc18a8b6c766643 -->
A React component that manages NATS WebSocket subscriptions for real-time dialog message streaming, handling authentication, connection state, and chunk sequencing with catchup mechanisms.

## Key Components

- **DialogNatsSubscription** - Main component handling NATS WebSocket connection lifecycle
- **useChunkCatchup** - Hook managing message chunk ordering and historical data retrieval  
- **useNatsDialogSubscriptionCore** - Core NATS subscription logic from OpenFrame
- **Authentication helpers** - Token management and URL building utilities
- **Connection state handlers** - Callbacks for connect/disconnect/subscribe events

## Usage Example

```typescript
import { DialogNatsSubscription } from './dialog-nats-subscription'

function ChatDialog({ dialogId }: { dialogId: string }) {
  const [chunks, setChunks] = useState<ChunkData[]>([])
  
  const handleChunkReceived = (
    dialogId: string, 
    chunk: ChunkData, 
    messageType: NatsMessageType
  ) => {
    setChunks(prev => [...prev, chunk])
  }

  return (
    <div>
      <DialogNatsSubscription
        dialogId={dialogId}
        isActive={true}
        onChunkReceived={handleChunkReceived}
        onSubscribed={(id) => console.log(`Subscribed to ${id}`)}
        onConnected={() => console.log('NATS connected')}
        onDisconnected={() => console.log('NATS disconnected')}
      />
      {/* Render chat messages from chunks */}
    </div>
  )
}
```

The component automatically handles token refresh from localStorage, builds appropriate WebSocket URLs, and ensures message delivery order through chunk catchup mechanisms. It renders nothing visually but provides essential real-time messaging infrastructure.