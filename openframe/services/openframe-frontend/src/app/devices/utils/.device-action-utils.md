<!-- source-hash: 30b75880fc00cf191b4daab04a27634e -->
Centralized utilities for determining device action availability and managing tool connections in the Flamingo MSP platform. Provides a single source of truth for enabling/disabling device actions based on device status and connected tools.

## Key Components

- **Status Checkers**: `isDeviceOnline()`, `canArchiveDevice()`, `canDeleteDevice()` - Validate device states
- **Tool Connection Helpers**: `getToolConnection()`, `getMeshCentralAgentId()`, `getTacticalAgentId()` - Extract tool-specific agent IDs
- **DeviceActionAvailability Interface**: Complete action state object with enabled flags and tool IDs
- **getDeviceActionAvailability()**: Main function returning unified availability logic for all device actions

## Usage Example

```typescript
import { getDeviceActionAvailability } from './device-action-utils'

// Get all action availability for a device
const actions = getDeviceActionAvailability(device)

// Check if remote actions are available
if (actions.remoteShellEnabled) {
  // Enable remote shell button
  openRemoteShell(actions.meshcentralAgentId)
}

// Check if scripts can be run
if (actions.runScriptEnabled) {
  // Enable run script button
  executeScript(actions.tacticalAgentId, scriptId)
}

// Check if device can be archived
if (actions.archiveEnabled) {
  // Show archive option in menu
  showArchiveOption(device.id)
}
```

The utility enforces business rules like requiring MeshCentral agents for remote control features and Tactical RMM agents for script execution, while ensuring all actions respect the device's online status and lifecycle state.