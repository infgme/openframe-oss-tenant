
registerJob:
  enabled: true
  image:
    registry: ghcr.io/flamingo-stack/registry
    repository: curlimages/curl
    tag: "8.9.1"


loki:
  url: "http://loki.platform.svc.cluster.local:3100/loki/api/v1/push"
  batchWait: "1s"
  batchSize: "1MiB"

prometheus:
  remoteWriteUrl: "http://prometheus-server.platform.svc.cluster.local:80/api/v1/write"
  scrapeInterval: "30s"
  scrapeTimeout: "25s"
  namespaceFilter: "argocd|platform|datasources|microservices|client-tools|integrated-tools"


alloy:
  alloy:
    clustering:
      enabled: false
    stabilityLevel: "generally-available"

    configMap:
      create: false
      name: alloy-config
      key: config.alloy
    
    mounts:
      varlog: true

  
  image:
    registry: ghcr.io/flamingo-stack/registry
    repository: grafana/alloy
    tag: "v1.12.1"
  configReloader:
    image:
      registry: ghcr.io/flamingo-stack/registry
      repository: prometheus-operator/prometheus-config-reloader
      tag: "v0.86.1"

  controller:
    type: daemonset
    revisionHistoryLimit: 2
    tolerations:
      - operator: Exists
        effect: NoSchedule
    podAnnotations:
      loki.grafana.com/scrape: "true"

  serviceAccount:
    create: true
  rbac:
    create: true

  # Increased resources for unified logs + metrics collection
  resources:
    requests:
      cpu: 150m
      memory: 384Mi
    limits:
      cpu: 300m
      memory: 768Mi

  livenessProbe:
    httpGet:
      path: /-/healthy
      port: 12345
    initialDelaySeconds: 30
    periodSeconds: 10
  readinessProbe:
    httpGet:
      path: /-/ready
      port: 12345
    initialDelaySeconds: 10
    periodSeconds: 5
