<!-- source-hash: 47eaaee8ce90321fd541d316a1d5de3d -->
A React hook that manages chat messages with streaming content support, tool execution tracking, and approval workflows for the Flamingo AI assistant.

## Key Components

- **useChatMessages** - Main hook that returns message state and manipulation functions
- **Message Management** - Functions for adding, updating, and clearing messages
- **Segment Accumulator** - Handles streaming text and tool execution segments
- **Approval System** - Integration with approval request workflows
- **Error Handling** - Specialized error message creation and replacement

## Usage Example

```typescript
import { useChatMessages } from './useChatMessages'

function ChatComponent() {
  const {
    messages,
    hasMessages,
    addMessage,
    ensureAssistantMessage,
    appendTextToCurrentMessage,
    addToolSegmentToCurrentMessage,
    clearMessages
  } = useChatMessages({
    onApprove: async (requestId) => {
      await approveAction(requestId)
    },
    onReject: async (requestId) => {
      await rejectAction(requestId)
    }
  })

  const handleUserMessage = (text: string) => {
    addMessage({
      id: `user-${Date.now()}`,
      role: 'user',
      content: text,
      timestamp: new Date()
    })
    
    // Start streaming assistant response
    ensureAssistantMessage()
  }

  const handleStreamingText = (text: string) => {
    appendTextToCurrentMessage(text)
  }

  return (
    <div>
      {messages.map(message => (
        <MessageComponent key={message.id} message={message} />
      ))}
    </div>
  )
}
```

The hook integrates with the OpenFrame message segment system to handle complex streaming responses with text, tool executions, and approval requests.