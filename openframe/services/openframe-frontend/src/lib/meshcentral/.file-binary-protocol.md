<!-- source-hash: 877b86dfb31b42b9ad196448e406cb5b -->
A binary protocol handler that accumulates incoming data chunks and extracts complete messages based on a 4-byte header format used by MeshCentral's file manager.

## Key Components

- **`push(data, onChunk)`** - Accumulates binary data and triggers callback for complete chunks
- **`consume(onChunk)`** - Internal method that processes buffered data and extracts complete messages
- **`readHeader(headerBytes)`** - Parses 4-byte header to extract payload length and final flag
- **`reset()`** - Clears the internal buffer
- **`isBinaryData(data)`** - Type guard to check if data is binary format

## Usage Example

```typescript
import { FileBinaryProtocol } from './file-binary-protocol'

const protocol = new FileBinaryProtocol()

// Handle incoming WebSocket binary messages
websocket.onmessage = (event) => {
  if (protocol.isBinaryData(event.data)) {
    protocol.push(event.data, (payload, isFinal) => {
      console.log(`Received chunk: ${payload.length} bytes, final: ${isFinal}`)
      
      if (isFinal) {
        // Process complete message
        handleCompleteMessage(payload)
        protocol.reset() // Optional: reset for next message sequence
      }
    })
  }
}

function handleCompleteMessage(data: Uint8Array) {
  // Process the complete binary message
  const text = new TextDecoder().decode(data)
  console.log('Complete message:', text)
}
```

The protocol uses a header format where bits 1-31 contain the payload length and bit 0 indicates if this is the final chunk in a sequence.