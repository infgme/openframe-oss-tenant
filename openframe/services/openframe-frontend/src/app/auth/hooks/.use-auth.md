<!-- source-hash: 05e8886e9e7b793a91ffafb877a4566e -->
A custom React hook that manages authentication state, token storage, and tenant discovery for the OpenFrame platform.

## Key Components

- **Authentication State Management** - Integrates with auth store for login/logout state
- **Token Storage** - Handles access/refresh tokens in localStorage
- **Tenant Discovery** - Discovers existing tenant accounts by email
- **OAuth Flow Handling** - Processes authentication callbacks from SSO providers
- **Session Validation** - Periodic auth checks via `/me` endpoint
- **Registration Support** - Organization and SSO registration flows

## Usage Example

```typescript
import { useAuth } from './use-auth'

function LoginComponent() {
  const { 
    isAuthenticated, 
    user, 
    isLoading,
    discoverTenants,
    registerOrganization,
    handleAuthenticationSuccess 
  } = useAuth()

  const handleEmailSubmit = async (email: string) => {
    const discovery = await discoverTenants(email)
    
    if (discovery?.has_existing_accounts) {
      // Redirect to tenant login
      console.log('Found tenant:', discovery.tenant_id)
    } else {
      // Show registration form
      console.log('New user, show registration')
    }
  }

  const handleRegistration = async (formData: RegisterRequest) => {
    try {
      await registerOrganization(formData)
      // Registration success handled automatically
    } catch (error) {
      console.error('Registration failed:', error)
    }
  }

  return (
    <div>
      {isAuthenticated ? (
        <p>Welcome, {user?.email}</p>
      ) : (
        <LoginForm onSubmit={handleEmailSubmit} loading={isLoading} />
      )}
    </div>
  )
}
```

The hook automatically handles OAuth callbacks, maintains session state, and provides a complete authentication flow for both new registrations and existing tenant logins.