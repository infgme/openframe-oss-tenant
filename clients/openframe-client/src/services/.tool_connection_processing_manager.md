<!-- source-hash: 0b511ea53076e897df748ce9631852fc -->
Manages the processing and establishment of tool connections for installed tools in the Flamingo platform, handling agent ID resolution and connection message publishing with retry logic.

## Key Components

- **`ToolConnectionProcessingManager`** - Main orchestrator that manages tool connection lifecycle
- **`run()`** - Processes connections for all installed tools
- **`run_new_tool()`** - Processes connections for newly installed tools
- **`process_tool()`** - Executes agent ID commands and publishes connection messages
- **`try_mark_running()`** - Prevents duplicate processing with thread-safe tracking
- **`clear_running_tool()`** - Removes tools from running state

## Usage Example

```rust
let manager = ToolConnectionProcessingManager::new(
    installed_tools_service,
    params_processor,
    tool_connection_publisher,
    config_service,
    tool_connection_service,
);

// Process all installed tools
manager.run().await?;

// Process a newly installed tool
let new_tool = InstalledTool { 
    tool_id: "my-tool".to_string(),
    tool_agent_id: "agent-123".to_string(),
    // ... other fields
};
manager.run_new_tool(new_tool).await?;

// Clean up after processing
manager.clear_running_tool("my-tool").await;
```

The manager executes tool agent ID commands with 15-second timeouts, retries on failures, and maintains a thread-safe registry of running tools to prevent concurrent processing. It spawns async tasks for each tool to handle long-running connection establishment processes.