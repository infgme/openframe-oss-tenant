<!-- source-hash: 6b1e88b8d933bd26ae4fe8db8acb5de3 -->
Handles authentication workflows for the Flamingo agent, managing token lifecycle through initial authentication, token refresh, and fallback strategies.

## Key Components

- **AgentAuthService** - Main service orchestrating authentication flows
- **authenticate_initial()** - Performs first-time authentication using client credentials
- **reauthenticate()** - Handles token refresh with automatic fallback to client credentials
- **try_refresh_token_authentication()** - Attempts refresh token flow with error handling
- **authenticate_with_client_credentials()** - Fallback authentication using client ID/secret
- **save_tokens_to_config()** - Persists new tokens to configuration and shared token service

## Usage Example

```rust
use crate::services::agent_auth_service::AgentAuthService;

// Initialize the authentication service
let auth_service = AgentAuthService::new(
    auth_client,
    config_service,
    shared_token_service,
);

// Perform initial authentication
let token_response = auth_service.authenticate_initial().await?;

// Later, refresh tokens when needed
match auth_service.reauthenticate().await {
    Ok(new_tokens) => println!("Authentication refreshed successfully"),
    Err(e) => eprintln!("Authentication failed: {}", e),
}
```

The service implements a robust authentication strategy with automatic fallback from refresh tokens to client credentials, ensuring the agent maintains valid authentication even when refresh tokens expire or are rejected.