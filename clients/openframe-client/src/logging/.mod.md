<!-- source-hash: 6668dc32649c0fcb635b325beb634405 -->
Cross-platform logging system that provides structured logging with metrics collection, automatic file rotation, and platform-specific log paths. Supports both JSON and text output formats with fallback manual logging capabilities.

## Key Components

- **`init()`** - Initializes the logging system with optional endpoint and agent ID
- **`manual_log()`** - Fallback logging function that writes directly to file when tracing fails
- **`JsonLayer`** - Custom tracing layer for structured JSON log output
- **`LogEntry`** - Serializable log entry structure with timestamp, level, and metadata
- **`JsonVisitor`** - Field visitor for extracting log data from tracing events
- **`MetricsLayer`** - Integrated metrics collection for log events
- **Platform-specific directories** - Uses `DirectoryManager` for cross-platform log file paths
- **Log compression** - Background thread for compressing old log files
- **Dual output modes** - Configurable text (default) or JSON format via `OPENFRAME_LOG_FORMAT`

## Usage Example

```rust
use logging::init;

// Initialize logging system
init(Some("https://logs.example.com".to_string()), Some("agent-123".to_string()))?;

// Normal tracing usage
tracing::info!("Application started");
tracing::error!(error = %err, "Failed to connect to database");

// Fallback manual logging when tracing fails
logging::manual_log("ERROR", "Critical system failure");

// Configure output format via environment variable
std::env::set_var("OPENFRAME_LOG_FORMAT", "json"); // or "text" (default)

// Development mode uses user directories instead of system paths
std::env::set_var("OPENFRAME_DEV_MODE", "1");
```

The system automatically handles log rotation, compression of old files, and provides both stdout/stderr output for daemon capture and persistent file storage with configurable formatting.