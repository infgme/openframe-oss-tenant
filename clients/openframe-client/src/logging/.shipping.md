<!-- source-hash: d469689e680e0079a4bde6012295160c -->
Asynchronous log batching and shipping system that efficiently collects logs in batches and sends them to a remote endpoint via HTTP, with support for both size-based and time-based batch flushing.

## Key Components

- **`LogBatch`** - Serializable struct containing batched logs with agent ID and timestamp
- **`LogShipper`** - Main service that manages log collection and shipping with configurable batching
- **`BATCH_SIZE`** - Maximum logs per batch (100)
- **`BATCH_TIMEOUT`** - Maximum time before batch is shipped (30 seconds)

Key methods:
- `new()` - Creates shipper instance and spawns background shipping task
- `send()` - Queues individual log messages for batching
- `ship_logs()` - Background task that handles batch collection and HTTP shipping
- `send_batch()` - Sends batched logs to remote endpoint via POST request

## Usage Example

```rust
use anyhow::Result;

#[tokio::main]
async fn main() -> Result<()> {
    // Create log shipper pointing to your log collection endpoint
    let shipper = LogShipper::new(
        "https://logs.flamingo.run/api/v1/logs".to_string(),
        "agent-001".to_string(),
    );

    // Send individual log messages
    shipper.send("Application started".to_string()).await?;
    shipper.send("User authenticated".to_string()).await?;
    shipper.send("Processing request".to_string()).await?;

    // Logs are automatically batched and shipped in background
    // Either when 100 logs accumulate or after 30 seconds
    
    Ok(())
}
```

The shipper automatically handles batching optimization, retry logic through HTTP status checking, and runs entirely in the background without blocking the main application thread.